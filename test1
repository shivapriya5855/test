from flask import Flask
import oneagent

# Initialize Dynatrace OneAgent SDK
sdk = oneagent.get_sdk()

if sdk is None:
    print("❌ Failed to retrieve Dynatrace OneAgent SDK instance.")
else:
    print("✅ Dynatrace OneAgent SDK instance retrieved successfully.")

# Check if OneAgent is active
if sdk.is_instrumented():
    print("✅ Dynatrace OneAgent SDK is instrumented.")
else:
    print("❌ Dynatrace OneAgent SDK is NOT instrumented.")

app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello, world!'

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=8080)
