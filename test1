// Determine the branch type
def branch = this.env.BRANCH_NAME.split('/')[0]

// Default values (optional fallback)
def openshiftURI = ''
def openshiftBuildProject = ''

switch (branch) {
    case 'develop':
        echo "Detected develop branch: setting OpenShift for DEV"
        openshiftURI = "https://api.useastl6.bofa.com:6443/"
        openshiftBuildProject = ""
        break

    case 'release':
        echo "Detected release branch: setting OpenShift for UAT"
        openshiftURI = "https://api.useast27.bofa.com:6443/"
        openshiftBuildProject = ""
        break

    default:
        error("Unsupported branch: ${branch}. Exiting...")
}



// OpenShift build properties
executeOpenshiftBuild = true
openshiftApp = "vaultproxyweb-bc"
openshiftImageName = "vaultproxyweb-bc"
openshiftImageTagPrefix = version
openShiftBuildConfig = "manifests/bc.yaml"
openshiftStageAgent = "ETASOPENSHIFT"

// Use the branch-based values
openshiftBuildProject = openshiftBuildProject
openshiftURI = openshiftURI
